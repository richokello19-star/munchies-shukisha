<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Munchies & Shukisha | Chef Marketplace</title>
    <link rel="icon" href="munchies-logo.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #11151C;
            --secondary: #38b6ff;
            --accent: #E63946;
            --light: #F1FAEE;
            --whatsapp: #25D366;
            --whatsapp-hover: #128C7E;
            --gold: #FFD700;
            --success: #4CAF50;
            --warning: #FF9800;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light);
            color: var(--primary);
            position: relative;
            min-height: 100vh;
            padding-bottom: 100px;
            line-height: 1.6;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 15px;
            letter-spacing: -0.5px;
        }
        
        .logo-icon {
            height: 50px;
            width: 50px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .brand-names {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            margin-top: 8px;
            color: var(--secondary);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background-color: var(--secondary);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }
        
        nav a:hover::after {
            width: 70%;
        }
        
        .hero {
            background: linear-gradient(135deg, rgba(17, 21, 28, 0.85) 0%, rgba(17, 21, 28, 0.7) 100%), 
                        url('https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-position: center;
            height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            position: relative;
            padding: 0 20px;
        }
        
        .hero-content {
            max-width: 800px;
            padding: 30px;
            background: rgba(17, 21, 28, 0.7);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin: 0 0 20px;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.5rem;
            margin: 0 0 30px;
            opacity: 0.9;
        }
        
        .btn-container {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--secondary);
            color: white;
            padding: 14px 32px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(56, 182, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(56, 182, 255, 0.4);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background-color: transparent;
            border: 2px solid white;
        }
        
        .vendor-badge {
            background: var(--gold);
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .menu {
            padding: 70px 20px;
            text-align: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .menu-header {
            margin-bottom: 50px;
        }
        
        .menu h2 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: var(--primary);
            position: relative;
            display: inline-block;
        }
        
        .menu h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }
        
        .menu p {
            font-size: 1.2rem;
            color: #666;
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-top: 30px;
        }
        
        .menu-item {
            background-color: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            cursor: pointer;
        }
        
        .menu-item:hover {
            transform: translateY(-15px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .menu-item-img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .menu-item:hover .menu-item-img {
            transform: scale(1.05);
        }
        
        .menu-item-content {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .menu-item h3 {
            margin: 0 0 12px;
            font-size: 1.6rem;
            color: var(--primary);
        }
        
        .menu-item p {
            margin: 12px 0;
            color: #555;
            flex-grow: 1;
        }
        
        .rating {
            color: var(--gold);
            margin: 10px 0;
            font-size: 1.1rem;
        }
        
        .price {
            font-weight: 800;
            color: var(--accent);
            font-size: 1.8rem;
            margin: 15px 0;
        }
        
        footer {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 30px 0;
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        /* Auth Modals */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .auth-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            z-index: 1001;
            width: 450px;
            max-width: 95%;
            animation: modalFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -55%) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .auth-modal h2 {
            margin-top: 0;
            color: var(--primary);
            text-align: center;
            font-size: 2rem;
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .auth-modal input, 
        .auth-modal select,
        .auth-modal textarea {
            width: 100%;
            padding: 14px;
            margin: 8px 0;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            box-sizing: border-box;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .auth-modal input:focus, 
        .auth-modal select:focus,
        .auth-modal textarea:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(56, 182, 255, 0.2);
        }

        .auth-modal button {
            width: 100%;
            padding: 14px;
            background-color: var(--secondary);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(56, 182, 255, 0.3);
        }

        .auth-modal button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(56, 182, 255, 0.4);
        }

        .auth-modal .close {
            position: absolute;
            top: 20px;
            right: 20px;
            cursor: pointer;
            font-size: 24px;
            color: #999;
            transition: all 0.3s ease;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .auth-modal .close:hover {
            color: var(--accent);
            background: rgba(230, 57, 70, 0.1);
        }

        .auth-modal .switch-form {
            text-align: center;
            margin-top: 25px;
            font-size: 1rem;
            color: #666;
        }

        .auth-modal .switch-form a {
            color: var(--secondary);
            cursor: pointer;
            font-weight: 700;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .auth-modal .switch-form a:hover {
            color: var(--primary);
            text-decoration: underline;
        }

        /* Google Button Styles */
        .btn-google {
            width: 100%;
            padding: 14px;
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .btn-google:hover {
            border-color: #ddd;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .btn-google img {
            width: 20px;
            height: 20px;
        }

        /* Shopping Cart */
        .cart-icon {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--secondary);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(56, 182, 255, 0.4);
            cursor: pointer;
            z-index: 99;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .cart-icon:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 30px rgba(56, 182, 255, 0.5);
        }

        .cart-icon i {
            font-size: 28px;
            color: white;
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
            box-shadow: 0 3px 10px rgba(230, 57, 70, 0.4);
        }

        /* Social Icons */
        .social-icons {
            position: fixed;
            bottom: 30px;
            left: 30px;
            display: flex;
            gap: 18px;
            z-index: 99;
        }

        .social-icons a {
            color: var(--primary);
            font-size: 26px;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: rgba(255, 255, 255, 0.9);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

        .social-icons a:hover {
            transform: translateY(-8px) scale(1.15);
            background: var(--secondary);
            color: white;
            box-shadow: 0 8px 20px rgba(56, 182, 255, 0.4);
        }

        /* Dark mode for social icons when on dark backgrounds */
        .dark-bg .social-icons a {
            color: white;
            background: rgba(0, 0, 0, 0.5);
        }

        .dark-bg .social-icons a:hover {
            background: var(--secondary);
            color: white;
        }

        /* Protected Content Overlay */
        .protected-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1002;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            backdrop-filter: blur(10px);
        }

        .protected-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: var(--primary);
            max-width: 500px;
            width: 90%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            animation: modalFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .protected-content h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .protected-content p {
            font-size: 1.2rem;
            margin-bottom: 25px;
            color: #666;
        }

        /* Add to Cart Button */
        .add-to-cart {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--secondary);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
        }

        .menu-item:hover .add-to-cart {
            opacity: 1;
            transform: scale(1.1);
        }

        .add-to-cart:hover {
            transform: scale(1.2);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .add-to-cart i {
            font-size: 18px;
        }

        /* Vendor Fields */
        #vendorFields {
            display: none;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px dashed #e1e5e9;
        }

        #vendorFields input, 
        #vendorFields select, 
        #vendorFields textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
        }

        #vendorFields textarea {
            min-height: 100px;
            resize: vertical;
        }

        #vendorFields small {
            font-size: 0.9rem;
            color: #666;
            margin-top: -5px;
            margin-bottom: 5px;
            display: block;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background-color: var(--primary);
            color: white;
            padding: 16px 28px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            z-index: 1003;
            animation: toastFade 4s forwards;
            display: none;
            max-width: 350px;
            font-weight: 500;
            border-left: 4px solid var(--secondary);
        }

        .toast.error {
            background-color: var(--accent);
            border-left-color: #c00;
        }

        .toast.success {
            background-color: var(--success);
            border-left-color: #2e7d32;
        }

        @keyframes toastFade {
            0% { opacity: 0; transform: translateX(100%); }
            10% { opacity: 1; transform: translateX(0); }
            90% { opacity: 1; transform: translateX(0); }
            100% { opacity: 0; transform: translateX(100%); }
        }

        /* Focus styles for accessibility */
        button:focus, a:focus, input:focus, select:focus, textarea:focus {
            outline: 3px solid var(--secondary);
            outline-offset: 2px;
        }

        /* Features Section */
        .features {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 80px 20px;
            text-align: center;
        }

        .features h2 {
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: var(--primary);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .feature-card {
            background: white;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            font-size: 3.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .feature-card p {
            color: #666;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        /* Restaurant Detail Page Styles */
        .restaurant-detail {
            padding: 40px 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            margin-bottom: 30px;
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 30px;
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .back-button i {
            margin-right: 8px;
        }

        .restaurant-header {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 40px;
        }

        .restaurant-hero {
            position: relative;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .restaurant-hero img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .restaurant-info {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        }

        .restaurant-title {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .restaurant-title h1 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-right: 20px;
        }

        .restaurant-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #666;
            font-size: 0.95rem;
        }

        .meta-item i {
            color: var(--secondary);
        }

        .restaurant-description {
            margin-bottom: 25px;
            line-height: 1.8;
            color: #555;
        }

        .restaurant-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .menu-section {
            margin-top: 60px;
        }

        .menu-section h2 {
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: var(--primary);
            position: relative;
            display: inline-block;
        }

        .menu-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .menu-category {
            margin-bottom: 50px;
        }

        .menu-category h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary);
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .menu-items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }

        .menu-item-detail {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .menu-item-detail:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .menu-item-img-detail {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .menu-item-content-detail {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .menu-item-content-detail h4 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .menu-item-content-detail p {
            color: #666;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .menu-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .price-detail {
            font-weight: 800;
            color: var(--accent);
            font-size: 1.4rem;
        }

        .add-to-cart-detail {
            background: var(--secondary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(56, 182, 255, 0.3);
        }

        .add-to-cart-detail:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(56, 182, 255, 0.4);
        }

        .reviews-section {
            margin-top: 60px;
        }

        .reviews-section h2 {
            font-size: 2.2rem;
            margin-bottom: 30px;
            color: var(--primary);
            position: relative;
            display: inline-block;
        }

        .reviews-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--secondary);
            border-radius: 2px;
        }

        .review-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .reviewer {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .reviewer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .reviewer-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .review-date {
            color: #888;
            font-size: 0.9rem;
        }

        .review-content p {
            line-height: 1.7;
            color: #555;
        }

        /* Checkout Modal */
        .checkout-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            z-index: 1001;
            width: 500px;
            max-width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .checkout-modal h2 {
            margin-top: 0;
            color: var(--primary);
            text-align: center;
            font-size: 2rem;
            margin-bottom: 25px;
        }

        .checkout-items {
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .checkout-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .checkout-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            font-size: 1.2rem;
            padding: 15px 0;
            border-top: 2px solid var(--secondary);
            margin-top: 10px;
        }

        /* Payment Form */
        .payment-form {
            margin-top: 20px;
        }

        .payment-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .payment-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-option.active {
            border-color: var(--secondary);
            background-color: rgba(56, 182, 255, 0.1);
        }

        .payment-option i {
            font-size: 24px;
            margin-bottom: 10px;
            display: block;
        }

        /* File Upload Styling */
        .file-upload-container {
            margin-bottom: 20px;
        }

        .file-upload-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        .file-upload-box {
            border: 2px dashed #e1e5e9;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .file-upload-box:hover {
            border-color: var(--secondary);
            background: #f1f8ff;
        }

        .file-upload-box i {
            font-size: 3rem;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        .file-upload-box p {
            color: #666;
            margin-bottom: 15px;
        }

        .file-upload-box span {
            color: #999;
            font-size: 0.9rem;
        }

        .file-upload-box input[type="file"] {
            display: none;
        }

        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .preview-item {
            position: relative;
            width: 150px;
            height: 150px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .preview-item .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--accent);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        /* Vendor Dashboard Link */
        #vendorDashboardLink {
            display: none;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state i {
            font-size: 4rem;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #555;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .hero {
                height: 400px;
                background-attachment: scroll;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
            
            .btn-container {
                flex-direction: column;
                align-items: center;
            }
            
            .menu h2 {
                font-size: 2.2rem;
            }
            
            .social-icons {
                bottom: 110px;
                left: 50%;
                transform: translateX(-50%);
            }
            
            .cart-icon {
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
            }
            
            .auth-modal {
                width: 95%;
                padding: 30px;
            }
            
            nav ul {
                gap: 10px;
            }
            
            .menu-items {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .restaurant-title {
                flex-direction: column;
                gap: 15px;
            }
            
            .restaurant-title h1 {
                font-size: 2rem;
            }
            
            .restaurant-hero {
                height: 250px;
            }
            
            .menu-items-grid {
                grid-template-columns: 1fr;
            }
            
            .restaurant-actions {
                flex-direction: column;
            }
            
            .payment-options {
                flex-direction: column;
            }
            
            .preview-item {
                width: 100px;
                height: 100px;
            }
        }

        @media (max-width: 480px) {
            .hero {
                height: 350px;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .logo {
                font-size: 2rem;
            }
            
            .brand-names {
                font-size: 1.5rem;
            }
            
            .menu h2 {
                font-size: 1.8rem;
            }
            
            .restaurant-info {
                padding: 20px;
            }
            
            .file-upload-box {
                padding: 20px;
            }
            
            .file-upload-box i {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <div class="logo">
                <div class="logo-icon">
                    <img src="munchies-logo.png" alt="Munchies Logo" style="height: 60px;">
                </div>
                <span>Munchies & Shukisha</span>
            </div>
            <div class="brand-names">
                <span>Every bite's a party</span>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="#"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#vendors"><i class="fas fa-utensils"></i> Vendors</a></li>
                <li><a href="#features"><i class="fas fa-star"></i> Features</a></li>
                <li id="authItem"><a href="#" id="authLink"><i class="fas fa-user"></i> Login</a></li>
                <li id="vendorDashboardLink" style="display: none;"><a href="#" onclick="showVendorDashboard()"><i class="fas fa-store"></i> My Store</a></li>
                <li><a href="#"><i class="fas fa-phone"></i> Contact</a></li>
            </ul>
        </nav>
    </header>
    
    <main id="main-content">
        <!-- Home page content (default view) -->
        <div id="home-page">
            <section class="hero">
                <div class="hero-content">
                    <h1>Kenya's Local Chef Marketplace</h1>
                    <p>Order from home chefs & restaurants near you</p>
                    <div class="btn-container">
                        <a href="#vendors" class="btn">Browse Vendors</a>
                        <a href="#" class="btn btn-secondary" onclick="showSignupModal()">Sell Your Food</a>
                    </div>
                </div>
            </section>
            
            <section class="features" id="features">
                <h2>Why Choose Munchies & Shukisha?</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <h3>Authentic Local Cuisine</h3>
                        <p>Discover the best home-cooked meals from talented chefs in your neighborhood, offering authentic flavors you can't find anywhere else.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <h3>Fast Delivery</h3>
                        <p>Get your favorite meals delivered to your doorstep in under 30 minutes with our efficient delivery network.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Quality Assured</h3>
                        <p>All our vendors are verified and regularly inspected to ensure the highest standards of food safety and quality.</p>
                    </div>
                </div>
            </section>
            
            <section class="menu" id="vendors">
                <div class="menu-header">
                    <h2>Featured Vendors</h2>
                    <p>Discover amazing home chefs and restaurants in your area</p>
                </div>
                <div class="menu-items" id="vendors-container">
                    <!-- Vendor items will be dynamically populated here -->
                    <div class="empty-state">
                        <i class="fas fa-utensils"></i>
                        <h3>No Vendors Yet</h3>
                        <p>Be the first to sign up as a vendor and showcase your culinary creations!</p>
                        <button class="btn" onclick="showSignupModal()" style="margin-top: 20px;">Become a Vendor</button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Restaurant Detail Page (hidden by default) -->
        <div id="restaurant-detail-page" class="restaurant-detail" style="display: none;">
            <!-- Content will be dynamically populated by JavaScript -->
        </div>
    </main>

    <!-- Protected Content Overlay -->
    <div class="protected-overlay" id="protectedOverlay">
        <div class="protected-content">
            <h2>Please Sign In</h2>
            <p>You need to be logged in to make purchases</p>
            <button onclick="showLoginModal()" class="btn">Login</button>
            <p>Don't have an account? <a href="#" onclick="showSignupModal()">Sign up</a></p>
        </div>
    </div>

    <!-- Shopping Cart -->
    <div class="cart-icon" onclick="showCart()">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <!-- Social Icons -->
    <div class="social-icons">
        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="#" title="TikTok"><i class="fab fa-tiktok"></i></a>
    </div>
    
    <footer>
        <p>&copy; <span id="currentYear">2023</span> Munchies & Shukisha. All rights reserved.</p>
    </footer>

    <!-- Auth Modals -->
    <div class="overlay" id="overlay"></div>
    
    <div class="auth-modal" id="loginModal">
        <span class="close" onclick="closeModals()">×</span>
        <h2>Welcome Back</h2>
        <div class="form-group">
            <input type="email" id="loginEmail" placeholder="Email Address">
        </div>
        <div class="form-group">
            <input type="password" id="loginPassword" placeholder="Password">
        </div>
        <button onclick="login()">Login</button>
        <button class="btn-google" onclick="signInWithGoogle()">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
            Sign in with Google
        </button>
        <div class="switch-form">
            Don't have an account? <a onclick="switchToSignup()">Sign up</a>
        </div>
    </div>
    
    <div class="auth-modal" id="signupModal">
        <span class="close" onclick="closeModals()">×</span>
        <h2>Create Account</h2>
        <div class="form-group">
            <input type="text" id="signupName" placeholder="Full Name">
        </div>
        <div class="form-group">
            <input type="email" id="signupEmail" placeholder="Email Address">
        </div>
        <div class="form-group">
            <input type="password" id="signupPassword" placeholder="Password">
        </div>
        <div class="form-group">
            <select id="userType" onchange="toggleVendorFields()">
                <option value="buyer">I'm a Buyer</option>
                <option value="seller">I'm a Seller</option>
            </select>
        </div>
        
        <!-- Vendor-specific fields (hidden by default) -->
        <div id="vendorFields">
            <div class="form-group">
                <input type="text" id="businessName" placeholder="Business Name">
            </div>
            <div class="form-group">
                <input type="text" id="businessLocation" placeholder="Business Location">
            </div>
            <div class="form-group">
                <input type="text" id="foodHandlersCert" placeholder="Food Handler's Certificate No.">
            </div>
            <div class="form-group">
                <input type="text" id="kraPin" placeholder="KRA PIN">
            </div>
            <div class="form-group">
                <textarea id="description" placeholder="Describe your food business"></textarea>
            </div>
            
            <div class="file-upload-container">
                <label class="file-upload-label">Business Logo</label>
                <div class="file-upload-box" onclick="document.getElementById('businessLogo').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload or drag and drop</p>
                    <span>PNG, JPG, GIF up to 10MB</span>
                    <input type="file" id="businessLogo" accept="image/*" onchange="previewImage(this, 'logoPreview')">
                </div>
                <div class="image-preview" id="logoPreview"></div>
            </div>
            
            <div class="file-upload-container">
                <label class="file-upload-label">Business Photos</label>
                <div class="file-upload-box" onclick="document.getElementById('businessPhotos').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload or drag and drop</p>
                    <span>PNG, JPG, GIF up to 10MB</span>
                    <input type="file" id="businessPhotos" accept="image/*" multiple onchange="previewImage(this, 'photosPreview')">
                </div>
                <div class="image-preview" id="photosPreview"></div>
            </div>
            
            <div class="form-group">
                <select id="deliveryMethod">
                    <option value="">Delivery Method</option>
                    <option value="self">Self-Delivery</option>
                    <option value="platform">Platform Delivery</option>
                    <option value="both">Both</option>
                </select>
            </div>
            <div class="form-group">
                <input type="file" id="businessPermit" accept="image/*,.pdf">
                <small>Upload your business permit (image or PDF)</small>
            </div>
        </div>
        
        <button onclick="signup()">Create Account</button>
        <button class="btn-google" onclick="signInWithGoogle()">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
            Sign up with Google
        </button>
        <div class="switch-form">
            Already have an account? <a onclick="switchToLogin()">Login</a>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="checkout-modal" id="checkoutModal">
        <span class="close" onclick="closeCheckout()">×</span>
        <h2>Checkout</h2>
        <div class="checkout-items" id="checkoutItems">
            <!-- Cart items will be populated here -->
        </div>
        <div class="checkout-total">
            <span>Total:</span>
            <span id="checkoutTotal">KSh 0</span>
        </div>
        
        <div class="payment-form">
            <h3>Payment Method</h3>
            <div class="payment-options">
                <div class="payment-option" onclick="selectPayment('mpesa')">
                    <i class="fas fa-mobile-alt"></i>
                    <span>M-Pesa</span>
                </div>
                <div class="payment-option" onclick="selectPayment('card')">
                    <i class="fas fa-credit-card"></i>
                    <span>Card</span>
                </div>
                <div class="payment-option" onclick="selectPayment('cash')">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Cash</span>
                </div>
            </div>
            
            <div id="mpesaForm" style="display: none;">
                <div class="form-group">
                    <input type="tel" placeholder="Phone Number" id="mpesaPhone">
                </div>
                <button onclick="payWithMpesa()" class="btn">Pay with M-Pesa</button>
            </div>
            
            <div id="cardForm" style="display: none;">
                <div class="form-group">
                    <input type="text" placeholder="Card Number" id="cardNumber">
                </div>
                <div style="display: flex; gap: 10px;">
                    <div class="form-group" style="flex: 1;">
                        <input type="text" placeholder="MM/YY" id="cardExpiry">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <input type="text" placeholder="CVV" id="cardCvv">
                    </div>
                </div>
                <button onclick="payWithCard()" class="btn">Pay with Card</button>
            </div>
            
            <div id="cashForm" style="display: none;">
                <p>Pay with cash when your order is delivered</p>
                <button onclick="placeOrder()" class="btn">Place Order</button>
            </div>
        </div>
    </div>

    <script>
        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // DOM Elements
        const authLink = document.getElementById('authLink');
        const authItem = document.getElementById('authItem');
        const overlay = document.getElementById('overlay');
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const protectedOverlay = document.getElementById('protectedOverlay');
        const cartCount = document.getElementById('cartCount');
        const homePage = document.getElementById('home-page');
        const restaurantDetailPage = document.getElementById('restaurant-detail-page');
        const checkoutModal = document.getElementById('checkoutModal');
        const checkoutItems = document.getElementById('checkoutItems');
        const checkoutTotal = document.getElementById('checkoutTotal');
        const vendorsContainer = document.getElementById('vendors-container');
        const vendorDashboardLink = document.getElementById('vendorDashboardLink');

        // Cart state
        let cart = [];
        let isLoggedIn = false;
        let selectedPaymentMethod = '';
        let currentUser = null;
        let vendors = [];

        // Initialize the page
        function init() {
            loadCart();
            loadVendors();
            checkBackgroundColor();
        }

        // Load vendors from localStorage
        function loadVendors() {
            try {
                const savedVendors = localStorage.getItem('vendors');
                if (savedVendors) {
                    vendors = JSON.parse(savedVendors);
                    renderVendors();
                }
            } catch (error) {
                console.error("Error loading vendors:", error);
            }
        }

        // Save vendors to localStorage
        function saveVendors() {
            try {
                localStorage.setItem('vendors', JSON.stringify(vendors));
            } catch (error) {
                console.error("Error saving vendors:", error);
            }
        }

        // Render vendors to the page
        function renderVendors() {
            if (vendors.length === 0) {
                vendorsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-utensils"></i>
                        <h3>No Vendors Yet</h3>
                        <p>Be the first to sign up as a vendor and showcase your culinary creations!</p>
                        <button class="btn" onclick="showSignupModal()" style="margin-top: 20px;">Become a Vendor</button>
                    </div>
                `;
                return;
            }

            let vendorsHTML = '';
            
            vendors.forEach(vendor => {
                vendorsHTML += `
                    <div class="menu-item" onclick="showRestaurantDetail('${vendor.id}')">
                        <button class="add-to-cart" onclick="event.stopPropagation(); addToCart('${vendor.businessName} Sample Dish', 499)">
                            <i class="fas fa-plus"></i>
                        </button>
                        <img src="${vendor.logo || 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80'}" alt="${vendor.businessName}" class="menu-item-img" loading="lazy">
                        <div class="menu-item-content">
                            <span class="vendor-badge">${vendor.businessType || 'Food Vendor'}</span>
                            <h3>${vendor.businessName}</h3>
                            <p>${vendor.description || 'Delicious food made with love and tradition.'}</p>
                            <div class="rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <span>(0 reviews)</span>
                            </div>
                            <p class="price">KSh 499+</p>
                            <button class="btn" onclick="event.stopPropagation(); addToCart('${vendor.businessName} Sample Dish', 499)">Add to Cart</button>
                        </div>
                    </div>
                `;
            });
            
            vendorsContainer.innerHTML = vendorsHTML;
        }

        // Load cart from localStorage on page load
        function loadCart() {
            try {
                const savedCart = sessionStorage.getItem('cart');
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                    updateCartCount();
                }
            } catch (error) {
                console.error("Error loading cart:", error);
            }
        }

        // Save cart to localStorage
        function saveCart() {
            try {
                sessionStorage.setItem('cart', JSON.stringify(cart));
            } catch (error) {
                console.error("Error saving cart:", error);
            }
        }

        // Check background color for social icons
        function checkBackgroundColor() {
            try {
                const heroSection = document.querySelector('.hero');
                const socialIcons = document.querySelector('.social-icons');
                
                if (!heroSection || !socialIcons) return;
                
                // Get position of social icons
                const rect = socialIcons.getBoundingClientRect();
                const centerY = rect.top + (rect.height / 2);
                
                // Get element at that position
                const elementAtCenter = document.elementFromPoint(rect.left + (rect.width / 2), centerY);
                
                // Check if it's the hero section (dark background)
                if (elementAtCenter === heroSection || heroSection.contains(elementAtCenter)) {
                    document.body.classList.add('dark-bg');
                } else {
                    document.body.classList.remove('dark-bg');
                }
            } catch (error) {
                console.error("Error checking background color:", error);
            }
        }

        // Toggle vendor fields visibility
        function toggleVendorFields() {
            try {
                const userType = document.getElementById('userType').value;
                const vendorFields = document.getElementById('vendorFields');
                
                if (userType === 'seller') {
                    vendorFields.style.display = 'flex';
                } else {
                    vendorFields.style.display = 'none';
                }
            } catch (error) {
                console.error("Error toggling vendor fields:", error);
            }
        }

        // Preview uploaded images
        function previewImage(input, previewId) {
            const previewContainer = document.getElementById(previewId);
            previewContainer.innerHTML = '';
            
            if (input.files) {
                const files = input.files;
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const previewItem = document.createElement('div');
                        previewItem.className = 'preview-item';
                        
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        
                        const removeBtn = document.createElement('div');
                        removeBtn.className = 'remove-image';
                        removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                        removeBtn.onclick = function() {
                            previewItem.remove();
                            // Clear the file input
                            input.value = '';
                        };
                        
                        previewItem.appendChild(img);
                        previewItem.appendChild(removeBtn);
                        previewContainer.appendChild(previewItem);
                    }
                    
                    reader.readAsDataURL(file);
                }
            }
        }

        // Show restaurant detail page
        function showRestaurantDetail(restaurantId) {
            try {
                const restaurant = vendors.find(v => v.id === restaurantId);
                if (!restaurant) return;
                
                // Hide home page, show detail page
                homePage.style.display = 'none';
                restaurantDetailPage.style.display = 'block';
                
                // Scroll to top
                window.scrollTo(0, 0);
                
                // Generate restaurant detail HTML
                let detailHTML = `
                    <a href="#" class="back-button" onclick="goBackToHome(); return false;">
                        <i class="fas fa-arrow-left"></i> Back to Vendors
                    </a>
                    
                    <div class="restaurant-header">
                        <div class="restaurant-hero">
                            <img src="${restaurant.photos && restaurant.photos.length > 0 ? restaurant.photos[0] : 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80'}" alt="${restaurant.businessName}">
                        </div>
                        
                        <div class="restaurant-info">
                            <div class="restaurant-title">
                                <h1>${restaurant.businessName}</h1>
                                <span class="vendor-badge">${restaurant.businessType || 'Food Vendor'}</span>
                            </div>
                            
                            <div class="restaurant-meta">
                                <div class="meta-item">
                                    <i class="fas fa-star"></i>
                                    <span>4.0 (0 reviews)</span>
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>${restaurant.businessLocation || 'Nairobi, Kenya'}</span>
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-clock"></i>
                                    <span>30-45 min</span>
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-truck"></i>
                                    <span>Delivery: KSh 100</span>
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-shopping-bag"></i>
                                    <span>Min order: KSh 300</span>
                                </div>
                            </div>
                            
                            <div class="restaurant-description">
                                <p>${restaurant.description || 'Delicious food made with love and tradition.'}</p>
                            </div>
                            
                            <div class="restaurant-actions">
                                <button class="btn" onclick="showToast('Restaurant added to favorites!')">
                                    <i class="far fa-heart"></i> Add to Favorites
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-section">
                        <h2>Menu</h2>
                        <div class="empty-state">
                            <i class="fas fa-utensils"></i>
                            <h3>Menu Coming Soon</h3>
                            <p>This vendor is still setting up their menu. Check back later!</p>
                        </div>
                    </div>
                    
                    <div class="reviews-section">
                        <h2>Customer Reviews</h2>
                        <div class="empty-state">
                            <i class="fas fa-comments"></i>
                            <h3>No Reviews Yet</h3>
                            <p>Be the first to review this vendor!</p>
                        </div>
                    </div>
                `;
                
                // Set the HTML content
                restaurantDetailPage.innerHTML = detailHTML;
            } catch (error) {
                console.error("Error showing restaurant detail:", error);
                showToast("Error loading restaurant details", true);
            }
        }

        // Go back to home page
        function goBackToHome() {
            homePage.style.display = 'block';
            restaurantDetailPage.style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Auth state listener
        function simulateAuthState() {
            if (sessionStorage.getItem('isLoggedIn') === 'true') {
                isLoggedIn = true;
                const userData = JSON.parse(sessionStorage.getItem('userData') || '{}');
                currentUser = userData;
                
                authLink.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                authLink.onclick = logout;
                
                // Show vendor dashboard link if user is a seller
                if (userData.userType === 'seller') {
                    vendorDashboardLink.style.display = 'list-item';
                }
            } else {
                isLoggedIn = false;
                currentUser = null;
                authLink.innerHTML = '<i class="fas fa-user"></i> Login';
                authLink.onclick = showLoginModal;
                vendorDashboardLink.style.display = 'none';
            }
        }

        // Show login modal
        function showLoginModal() {
            try {
                closeModals();
                overlay.style.display = 'block';
                loginModal.style.display = 'block';
                protectedOverlay.style.display = 'none';
                document.getElementById('loginEmail').focus();
            } catch (error) {
                console.error("Error showing login modal:", error);
            }
        }

        // Show signup modal
        function showSignupModal() {
            try {
                closeModals();
                overlay.style.display = 'block';
                signupModal.style.display = 'block';
                protectedOverlay.style.display = 'none';
                document.getElementById('signupName').focus();
            } catch (error) {
                console.error("Error showing signup modal:", error);
            }
        }

        // Close all modals
        function closeModals() {
            try {
                overlay.style.display = 'none';
                loginModal.style.display = 'none';
                signupModal.style.display = 'none';
            } catch (error) {
                console.error("Error closing modals:", error);
            }
        }

        // Switch to signup form
        function switchToSignup() {
            try {
                loginModal.style.display = 'none';
                signupModal.style.display = 'block';
                document.getElementById('signupName').focus();
            } catch (error) {
                console.error("Error switching to signup:", error);
            }
        }

        // Switch to login form
        function switchToLogin() {
            try {
                signupModal.style.display = 'none';
                loginModal.style.display = 'block';
                document.getElementById('loginEmail').focus();
            } catch (error) {
                console.error("Error switching to login:", error);
            }
        }

        // Login function
        function login() {
            try {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                if (!email || !password) {
                    showToast("Please fill in all fields", true);
                    return;
                }

                showToast("Logging in...");
                
                // Simulate login process
                setTimeout(() => {
                    // For demo purposes, create a simple user object
                    const userData = {
                        email: email,
                        name: email.split('@')[0],
                        userType: 'buyer' // Default to buyer
                    };
                    
                    sessionStorage.setItem('isLoggedIn', 'true');
                    sessionStorage.setItem('userData', JSON.stringify(userData));
                    simulateAuthState();
                    closeModals();
                    showToast("Login successful!", false, 'success');
                    isLoggedIn = true;
                    currentUser = userData;
                }, 1000);
            } catch (error) {
                console.error("Login error:", error);
                showToast("An unexpected error occurred", true);
            }
        }

        // Signup function
        function signup() {
            try {
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const userType = document.getElementById('userType').value;

                // Basic validation
                if (!name || !email || !password) {
                    showToast("Please fill in all required fields", true);
                    return;
                }

                // Additional validation for sellers
                if (userType === 'seller') {
                    const businessName = document.getElementById('businessName').value;
                    const businessLocation = document.getElementById('businessLocation').value;
                    const foodHandlersCert = document.getElementById('foodHandlersCert').value;
                    
                    if (!businessName || !businessLocation || !foodHandlersCert) {
                        showToast("As a seller, please provide your business details for verification", true);
                        return;
                    }
                }

                showToast("Creating account...");
                
                // Simulate signup process
                setTimeout(() => {
                    const userData = {
                        name: name,
                        email: email,
                        userType: userType
                    };
                    
                    // If user is a seller, create a vendor profile
                    if (userType === 'seller') {
                        const businessName = document.getElementById('businessName').value;
                        const businessLocation = document.getElementById('businessLocation').value;
                        const description = document.getElementById('description').value;
                        
                        const vendor = {
                            id: 'vendor-' + Date.now(),
                            businessName: businessName,
                            businessLocation: businessLocation,
                            description: description,
                            owner: email,
                            businessType: document.querySelector('select') ? document.querySelector('select').value : 'Food Vendor',
                            // In a real app, you would handle file uploads properly
                            logo: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80',
                            photos: ['https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80']
                        };
                        
                        vendors.push(vendor);
                        saveVendors();
                        renderVendors();
                    }
                    
                    sessionStorage.setItem('isLoggedIn', 'true');
                    sessionStorage.setItem('userData', JSON.stringify(userData));
                    simulateAuthState();
                    closeModals();
                    if (userType === 'seller') {
                        showToast("Account created! Seller verification pending.", false, 'success');
                    } else {
                        showToast("Account created successfully!", false, 'success');
                    }
                    isLoggedIn = true;
                    currentUser = userData;
                }, 1500);
            } catch (error) {
                console.error("Signup error:", error);
                showToast("An unexpected error occurred", true);
            }
        }

        // Google sign-in
        function signInWithGoogle() {
            try {
                showToast("Signing in with Google...");
                
                // Simulate Google login process
                setTimeout(() => {
                    const userData = {
                        name: 'Google User',
                        email: 'googleuser@example.com',
                        userType: 'buyer'
                    };
                    
                    sessionStorage.setItem('isLoggedIn', 'true');
                    sessionStorage.setItem('userData', JSON.stringify(userData));
                    simulateAuthState();
                    closeModals();
                    showToast("Google login successful!", false, 'success');
                    isLoggedIn = true;
                    currentUser = userData;
                }, 1200);
            } catch (error) {
                console.error("Google sign-in error:", error);
                showToast("An unexpected error occurred", true);
            }
        }

        // Logout function
        function logout() {
            try {
                showToast("Logging out...");
                setTimeout(() => {
                    sessionStorage.removeItem('isLoggedIn');
                    sessionStorage.removeItem('userData');
                    simulateAuthState();
                    showToast("Logged out successfully", false, 'success');
                    isLoggedIn = false;
                    currentUser = null;
                    cart = [];
                    updateCartCount();
                    saveCart();
                }, 800);
            } catch (error) {
                console.error("Logout error:", error);
                showToast("An unexpected error occurred", true);
            }
        }

        // Show vendor dashboard
        function showVendorDashboard() {
            if (!isLoggedIn || currentUser.userType !== 'seller') {
                showToast("Vendor dashboard is only available for sellers", true);
                return;
            }
            
            showToast("Vendor dashboard coming soon!", false, 'success');
        }

        // Add to cart function
        function addToCart(itemName, itemPrice) {
            try {
                if (!isLoggedIn) {
                    protectedOverlay.style.display = 'flex';
                    return;
                }

                cart.push({
                    name: itemName,
                    price: itemPrice,
                    id: Date.now().toString()
                });
                updateCartCount();
                saveCart();
                
                showToast(`${itemName} added to cart!`, false, 'success');
            } catch (error) {
                console.error("Add to cart error:", error);
                showToast("Error adding item to cart", true);
            }
        }

        // Remove from cart function
        function removeFromCart(itemId) {
            try {
                cart = cart.filter(item => item.id !== itemId);
                updateCartCount();
                saveCart();
                showToast("Item removed from cart");
            } catch (error) {
                console.error("Remove from cart error:", error);
                showToast("Error removing item from cart", true);
            }
        }

        // Update cart count
        function updateCartCount() {
            try {
                cartCount.textContent = cart.length;
                cartCount.style.display = cart.length > 0 ? 'flex' : 'none';
            } catch (error) {
                console.error("Update cart count error:", error);
            }
        }

        // Show cart
        function showCart() {
            try {
                if (!isLoggedIn) {
                    protectedOverlay.style.display = 'flex';
                    return;
                }

                if (cart.length === 0) {
                    showToast("Your cart is empty!");
                    return;
                }

                // Create cart modal
                const cartModal = document.createElement('div');
                cartModal.className = 'auth-modal';
                cartModal.style.display = 'block';
                cartModal.setAttribute('aria-modal', 'true');
                cartModal.setAttribute('role', 'dialog');
                
                let cartContent = `
                    <span class="close" onclick="this.parentElement.remove(); document.querySelector('.overlay:not(#overlay)').remove()">×</span>
                    <h2>Your Cart</h2>
                    <div style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                `;
                
                let total = 0;
                
                cart.forEach(item => {
                    cartContent += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid #eee;">
                            <div>
                                <h3 style="margin: 0 0 5px; font-size: 1.1rem;">${item.name}</h3>
                                <p style="margin: 0; color: #666;">KSh ${item.price}</p>
                            </div>
                            <button onclick="removeFromCart('${item.id}')" style="background: var(--accent); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
                    total += item.price;
                });

                cartContent += `
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; font-weight: 700; font-size: 1.2rem; padding: 10px 0; border-top: 2px solid var(--secondary);">
                        <span>Total:</span>
                        <span>KSh ${total}</span>
                    </div>
                    <button onclick="showCheckout()" class="btn" style="margin-top: 20px;">Proceed to Checkout</button>
                `;
                
                cartModal.innerHTML = cartContent;
                document.body.appendChild(cartModal);
                
                // Add overlay
                const cartOverlay = document.createElement('div');
                cartOverlay.className = 'overlay';
                cartOverlay.style.display = 'block';
                cartOverlay.onclick = () => {
                    cartModal.remove();
                    cartOverlay.remove();
                };
                document.body.appendChild(cartOverlay);
            } catch (error) {
                console.error("Show cart error:", error);
                showToast("Error displaying cart", true);
            }
        }

        // Show checkout modal
        function showCheckout() {
            try {
                // Close cart modal first
                document.querySelector('.auth-modal').remove();
                document.querySelector('.overlay').remove();
                
                // Calculate total
                let total = 0;
                let itemsHTML = '';
                
                cart.forEach(item => {
                    itemsHTML += `
                        <div class="checkout-item">
                            <span>${item.name}</span>
                            <span>KSh ${item.price}</span>
                        </div>
                    `;
                    total += item.price;
                });
                
                // Update checkout items and total
                checkoutItems.innerHTML = itemsHTML;
                checkoutTotal.textContent = `KSh ${total}`;
                
                // Show checkout modal
                overlay.style.display = 'block';
                checkoutModal.style.display = 'block';
            } catch (error) {
                console.error("Show checkout error:", error);
                showToast("Error loading checkout", true);
            }
        }

        // Close checkout modal
        function closeCheckout() {
            checkoutModal.style.display = 'none';
            overlay.style.display = 'none';
        }

        // Select payment method
        function selectPayment(method) {
            selectedPaymentMethod = method;
            
            // Remove active class from all options
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('active');
            });
            
            // Add active class to selected option
            event.target.closest('.payment-option').class.classList.add('active');
            
            // Show appropriate form
            document.getElementById('mpesaForm').style.display = method === 'mpesa' ? 'block' : 'none';
            document.getElementById('cardForm').style.display = method === 'card' ? 'block' : 'none';
            document.getElementById('cashForm').style.display = method === 'cash' ? 'block' : 'none';
        }

        // Pay with M-Pesa
        function payWithMpesa() {
            const phone = document.getElementById('mpesaPhone').value;
            
            if (!phone) {
                showToast("Please enter your phone number", true);
                return;
            }
            
            showToast("Sending M-Pesa request...");
            
            // Simulate M-Pesa payment
            setTimeout(() => {
                closeCheckout();
                placeOrder();
                showToast("Payment successful! Order placed.", false, 'success');
            }, 2000);
        }

        // Pay with card
        function payWithCard() {
            const cardNumber = document.getElementById('cardNumber').value;
            const cardExpiry = document.getElementById('cardExpiry').value;
            const cardCvv = document.getElementById('cardCvv').value;
            
            if (!cardNumber || !cardExpiry || !cardCvv) {
                showToast("Please fill in all card details", true);
                return;
            }
            
            showToast("Processing card payment...");
            
            // Simulate card payment
            setTimeout(() {
                closeCheckout();
                placeOrder();
                showToast("Payment successful! Order placed.", false, 'success');
            }, 2000);
        }

        // Place order (for cash payment)
        function placeOrder() {
            showToast("Order placed successfully!", false, 'success');
            
            // Clear cart
            cart = [];
            updateCartCount();
            saveCart();
            
            // Close checkout modal
            closeCheckout();
        }

        // Show toast notification
        function showToast(message, isError = false, type = 'default') {
            try {
                // Remove existing toasts
                const existingToast = document.querySelector('.toast');
                if (existingToast) existingToast.remove();
                
                const toast = document.createElement('div');
                toast.className = `toast ${isError ? 'error' : type === 'success' ? 'success' : ''}`;
                toast.textContent = message;
                document.body.appendChild(toast);
                
                // Show the toast
                toast.style.display = 'block';
                
                // Auto-remove after animation
                setTimeout(() => {
                    toast.remove();
                }, 4000);
            } catch (error) {
                console.error("Toast error:", error);
            }
        }

        // Close modals when clicking overlay
        overlay.addEventListener('click', closeModals);
        protectedOverlay.addEventListener('click', () => {
            protectedOverlay.style.display = 'none';
        });

        // Prevent modal close when clicking inside modal
        loginModal.addEventListener('click', (e) => e.stopPropagation());
        signupModal.addEventListener('click', (e) => e.stopPropagation());
        checkoutModal.addEventListener('click', (e) => e.stopPropagation());

        // Keyboard accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModals();
                protectedOverlay.style.display = 'none';
                closeCheckout();
                
                const toast = document.querySelector('.toast');
                if (toast) toast.remove();
                
                // Close cart modal if open
                const cartModal = document.querySelector('.auth-modal:not(#loginModal):not(#signupModal):not(#checkoutModal)');
                const cartOverlay = document.querySelector('.overlay:not(#overlay)');
                
                if (cartModal) cartModal.remove();
                if (cartOverlay) cartOverlay.remove();
            }
        });

        // Initialize the app
        window.addEventListener('DOMContentLoaded', () => {
            init();
            simulateAuthState();
        });

        window.addEventListener('resize', checkBackgroundColor);
        window.addEventListener('scroll', checkBackgroundColor);
    </script>
</body>
</html>
